{% extends 'navbar.html' %}
{% block nav %}
{% load custom_filters %}

<!-- breadcrumb -->

<div style="margin: 50px 0px 20px 80px;">
<nav aria-label="breadcrumb">
    <ol class="breadcrumb" style="font-size: larger;">
        <li class="breadcrumb-item"><a href="{% url 'shop' %}" style="text-decoration: none;color: rgb(135, 135, 136);">Shop</a></li>
        <li class="breadcrumb-item">
            <a href="{% url 'products' product.category %}" style="text-decoration: none;color: rgb(135, 135, 136);">{{ product.category }}</a>

        </li>
        <li class="breadcrumb-item active" aria-current="page">{{ product.title }}</li>
    </ol>
</nav>
</div>



<!-- prodct detail -->

<div class="d-flex" style="height: 100%;gap: 20px;margin: 30px;margin-top: 0px;">
        <div class="col-md-1 d-flex flex-column ms-5 mt-4">
            <img src="{{product.image.url}}" alt="" style="height: 100px; width: 100px;margin-bottom: 10px;">
            <img src="{{product.image.url}}" alt="" style="height: 100px; width: 100px;margin-bottom: 10px;">
            <img src="{{product.image.url}}" alt="" style="height: 100px; width: 100px;margin-bottom: 10px;">
            <img src="{{product.image.url}}" alt="" style="height: 100px; width: 100px;">
        </div>
        <div class="col-md-4 mt-4">
            <img src="{{product.image.url}}" class="img-fluid " alt="" style="height: 430px; width: 350px;">
        </div>
        <div class="col d-flex flex-column " ><br>
            <h4><b>{{product.title}}</b></h4>
            <!-- <p class="mt-2"><b>Average Rating:</b> {{ avg_rating|floatformat:1 }}/5</p> -->
            <p class="mt-2" style="color: goldenrod;font-size:x-large;">
                {% for i in 5|range_filter %}
                    {% if i < avg_rating %}
                    ★ <!-- Filled star -->
                    {% else %}
                    ☆  <!-- Empty star -->
                    {% endif %}
                {% endfor %}
            </p>
            
            <s class="text-secondary" style="font-size:x-large;">&#8377;{{product.price}}</s>
            <p style="color: #ff4141;font-size:x-large;">&#8377;{{product.offerprice}}</p>
            <p style="font-weight: bold;font-size: large; margin-top: 0px;">Shipping Fee : <span style="font-weight: lighter;">{{product.ShippingFee}}</span>
            <div>
                <!-- <a href="" class="btn btn-outline-primary text-dark mb-5"> -->
                <a href="{% url 'addtocart' product.id %}" class="btn text-light d-flex justify-content-center" style="background-color: #ff4141;width: 170px;border-radius: 0px;height: 50px;">
                    <!-- <i class="fa-solid fa-cart-plus" style="color: #f7f8f8;"></i> -->
                    <b class="ms-2">ADD TO CART</b>
                </a>
            </div>
            <!-- rating and review -->

    <!-- Add Review Section -->
    <h5>Write a Review</h5>
    <form method="post" action="{% url 'add_review' product.id %}">
        {% csrf_token %}
        {{ form.as_p }}

        <!-- Star Rating System -->
        <div>
            <label for="rating">Rating: </label>
            <input type="radio" id="star1" name="rating" value="1"><label for="star1">☆</label>
            <input type="radio" id="star2" name="rating" value="2"><label for="star2">☆</label>
            <input type="radio" id="star3" name="rating" value="3"><label for="star3">☆</label>
            <input type="radio" id="star4" name="rating" value="4"><label for="star4">☆</label>
            <input type="radio" id="star5" name="rating" value="5"><label for="star5">☆</label>
        </div>

        <button type="submit" class="btn btn-primary mt-2">Add Review</button>
    </form>

    <!-- Link to view all reviews -->
    <div class="mt-4">
        <a href="{% url 'view_reviews' product.pk %}">View All Reviews</a>
    </div>
</div>
        </div>


<!-- product description -->

<div style="margin: 70px;">
    <p style="font-size:20px;font-weight:bolder;border: solid 1px lightgrey;display: inline-block;padding:20px 60px 20px 60px;margin: 0;">Description</p>
    <p style="font-size:20px;border: solid 1px lightgrey;padding:60px 50px 60px 60px;margin: 0;">{{product.description}}</p>
</div>


<!-- Related Products -->
<div style="margin: 50px;">
    <h2 class="text-center mt-5" style="font-weight: 600;">RELATED PRODUCTS</h2>
    <div class="d-flex justify-content-center flex-wrap mt-3" style="gap: 30px;">
        {% for related_product in related_products %}
        <div class="card" style="width: 16rem; border-radius: 0%; margin-top: 10px; margin-bottom: 30px;">
            <img src="{{ related_product.image.url }}" height="300px" class="card-img-top" alt="{{ related_product.title }}">
            
    <div class="card-body">
                <h6 class="card-title">{{ related_product.title }}</h6>
                <p class="card-text" style="display: inline; margin-right: 10px;">
                    <b style="font-size: x-large;">&#8377;{{ related_product.offerprice }}</b>
                </p>
                <s class="card-text text-secondary">&#8377;{{ related_product.price }}</s>
                <a href="{% url 'pdetail' related_product.id %}" class="stretched-link"></a>
            </div>
        </div>
        {% empty %}
        <p>No related products available.</p>
        {% endfor %}
    </div>
</div>











<!-- <style>
    input[type="radio"] {
        display: none;
    }

    label {
        font-size: 30px;
        color: lightgray;
        cursor: pointer;
    }

    input[type="radio"]:checked ~ label {
        color: gold;
    }

    input[type="radio"]:checked ~ label:hover,
    input[type="radio"]:hover ~ label {
        color: gold;
    }
</style> -->

{% endblock nav %}

